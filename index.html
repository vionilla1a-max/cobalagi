l-confirm-reset')" class="p-2 rounded-full hover:bg-gray-100">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-700 mb-6">Apakah Anda yakin ingin **mereset semua data** aplikasi (transaksi, budget, impian, pengaturan)? Aksi ini tidak dapat dibatalkan.</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="hideModal('modal-confirm-reset')" class="flex-1 py-3 px-4 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300 transition-all">Batal</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="resetAppData()" class="flex-1 py-3 px-4 bg-danger text-white font-semibold rounded-lg shadow-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-danger focus:ring-opacity-75 transition-all">Ya, Reset Semua Data</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  

Â  Â  </div> Â  Â  Â  Â  Â  Â  Â  Â  <script>
Â  Â  Â  Â  // Data Default Aplikasi
Â  Â  Â  Â  const DEFAULT_DATA = {
Â  Â  Â  Â  Â  Â  saldo: 500000,
Â  Â  Â  Â  Â  Â  budgetLimit: 3000000,
Â  Â  Â  Â  Â  Â  categories: [
Â  Â  Â  Â  Â  Â  Â  Â  'Makanan & Minuman ðŸ”',
Â  Â  Â  Â  Â  Â  Â  Â  'Transportasi ðŸšŒ',
Â  Â  Â  Â  Â  Â  Â  Â  'Tagihan & Utilitas ðŸ’¡',
Â  Â  Â  Â  Â  Â  Â  Â  'Hiburan & Gaya Hidup ðŸŽ¬',
Â  Â  Â  Â  Â  Â  Â  Â  'Pendidikan ðŸ“š',
Â  Â  Â  Â  Â  Â  Â  Â  'Tabungan Impian ðŸ’°',
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  transactions: [
Â  Â  Â  Â  Â  Â  Â  Â  { id: 1, type: 'pemasukan', amount: 5000000, category: 'Gaji Bulanan', note: 'Gaji November', date: new Date().toISOString().substring(0, 10) },
Â  Â  Â  Â  Â  Â  Â  Â  { id: 2, type: 'pengeluaran', amount: 25000, category: 'Makanan & Minuman ðŸ”', note: 'Kopi', date: new Date().toISOString().substring(0, 10) },
Â  Â  Â  Â  Â  Â  Â  Â  { id: 3, type: 'pengeluaran', amount: 500000, category: 'Tabungan Impian ðŸ’°', note: 'Transfer ke tabungan motor', date: new Date().toISOString().substring(0, 10) },
Â  Â  Â  Â  Â  Â  Â  Â  { id: 4, type: 'pengeluaran', amount: 300000, category: 'Transportasi ðŸšŒ', note: 'Bensin & Tol', date: '2025-11-15' },
Â  Â  Â  Â  Â  Â  Â  Â  { id: 5, type: 'pengeluaran', amount: 150000, category: 'Hiburan & Gaya Hidup ðŸŽ¬', note: 'Nonton Bioskop', date: '2025-11-10' },
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  dream: {
Â  Â  Â  Â  Â  Â  Â  Â  title: 'Motor Baru Impian',
Â  Â  Â  Â  Â  Â  Â  Â  targetAmount: 15000000,
Â  Â  Â  Â  Â  Â  Â  Â  targetDate: '2026-06-01',
Â  Â  Â  Â  Â  Â  Â  Â  currentSaved: 500000,
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  settings: {
Â  Â  Â  Â  Â  Â  Â  Â  motivasiKuning: 'Hati-hati! Ingat impianmu!',
Â  Â  Â  Â  Â  Â  Â  Â  motivasiMerah: 'STOP! Kamu sudah boros. Cek lagi!',
Â  Â  Â  Â  Â  Â  Â  Â  notifAktif: false,
Â  Â  Â  Â  Â  Â  Â  Â  notifWaktu: '08:00',
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  let appData = {};
Â  Â  Â  Â  let txType = 'pengeluaran'; // Default tipe transaksi untuk modal

Â  Â  Â  Â  // --- Fungsi Utilitas ---

Â  Â  Â  Â  /** Mengambil data dari localStorage atau menggunakan default */
Â  Â  Â  Â  function loadData() {
Â  Â  Â  Â  Â  Â  const savedData = localStorage.getItem('fokusMasaDepanData');
Â  Â  Â  Â  Â  Â  if (savedData) {
Â  Â  Â  Â  Â  Â  Â  Â  appData = JSON.parse(savedData);
Â  Â  Â  Â  Â  Â  Â  Â  // Pastikan data baru ditambahkan jika tidak ada di local storage (misalnya settings notif)
Â  Â  Â  Â  Â  Â  Â  Â  appData.settings = {...DEFAULT_DATA.settings, ...appData.settings};
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  appData = DEFAULT_DATA;
Â  Â  Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menyimpan data ke localStorage */
Â  Â  Â  Â  function saveData() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('fokusMasaDepanData', JSON.stringify(appData));
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Memformat angka ke format Rupiah */
Â  Â  Â  Â  function formatRupiah(number) {
Â  Â  Â  Â  Â  Â  return new Intl.NumberFormat('id-ID', {
Â  Â  Â  Â  Â  Â  Â  Â  style: 'currency',
Â  Â  Â  Â  Â  Â  Â  Â  currency: 'IDR',
Â  Â  Â  Â  Â  Â  Â  Â  minimumFractionDigits: 0
Â  Â  Â  Â  Â  Â  }).format(number);
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Mengubah format tanggal (YYYY-MM-DD) menjadi (DD Mon YYYY) */
Â  Â  Â  Â  function formatDate(dateString) {
Â  Â  Â  Â  Â  Â  const options = { year: 'numeric', month: 'short', day: 'numeric' };
Â  Â  Â  Â  Â  Â  return new Date(dateString).toLocaleDateString('id-ID', options);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /** Mengubah format tanggal (YYYY-MM-DD) menjadi (YYYY-MM-DD) */
Â  Â  Â  Â  function formatInputDate(dateString) {
Â  Â  Â  Â  Â  Â  return new Date(dateString).toISOString().substring(0, 10);
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Fungsi Navigasi Halaman & Modal ---

Â  Â  Â  Â  /** Mengubah halaman yang terlihat */
Â  Â  Â  Â  function navigateTo(pageId) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.page').forEach(page => {
Â  Â  Â  Â  Â  Â  Â  Â  page.classList.remove('active');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.getElementById(pageId).classList.add('active');

Â  Â  Â  Â  Â  Â  // Panggil fungsi render yang sesuai
Â  Â  Â  Â  Â  Â  if (pageId === 'page-dashboard') renderDashboard();
Â  Â  Â  Â  Â  Â  if (pageId === 'page-history') renderHistoryPage();
Â  Â  Â  Â  Â  Â  if (pageId === 'page-analysis') renderAnalysisPage();
Â  Â  Â  Â  Â  Â  if (pageId.startsWith('page-settings')) loadSettingsForm(pageId);
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menampilkan modal */
Â  Â  Â  Â  function showModal(modalId) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById(modalId);
Â  Â  Â  Â  Â  Â  modal.style.display = 'block';
Â  Â  Â  Â  Â  Â  setTimeout(() => modal.classList.add('open'), 10); // Untuk transisi

Â  Â  Â  Â  Â  Â  // Inisialisasi konten modal
Â  Â  Â  Â  Â  Â  if (modalId === 'modal-add-tx') initializeAddTxModal();
Â  Â  Â  Â  Â  Â  if (modalId === 'modal-edit-dream') initializeDreamModal();
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menyembunyikan modal */
Â  Â  Â  Â  function hideModal(modalId) {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById(modalId);
Â  Â  Â  Â  Â  Â  modal.classList.remove('open');
Â  Â  Â  Â  Â  Â  setTimeout(() => modal.style.display = 'none', 300); // Tunggu transisi
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Alur 1: Tambah Transaksi ---

Â  Â  Â  Â  /** Mengganti tipe transaksi di modal (Pengeluaran/Pemasukan) */
Â  Â  Â  Â  function switchTxType(type) {
Â  Â  Â  Â  Â  Â  txType = type;
Â  Â  Â  Â  Â  Â  document.getElementById('tab-pengeluaran').classList.remove('border-primary', 'text-primary', 'border-b-2');
Â  Â  Â  Â  Â  Â  document.getElementById('tab-pengeluaran').classList.add('text-gray-500');
Â  Â  Â  Â  Â  Â  document.getElementById('tab-pemasukan').classList.remove('border-primary', 'text-primary', 'border-b-2');
Â  Â  Â  Â  Â  Â  document.getElementById('tab-pemasukan').classList.add('text-gray-500');

Â  Â  Â  Â  Â  Â  if (type === 'pengeluaran') {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('tab-pengeluaran').classList.add('border-primary', 'text-primary', 'border-b-2');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('form-tx-kategori-group').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  renderCategoryOptions();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('tab-pemasukan').classList.add('border-primary', 'text-primary', 'border-b-2');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('form-tx-kategori-group').style.display = 'none';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Mengisi opsi kategori di modal transaksi */
Â  Â  Â  Â  function renderCategoryOptions() {
Â  Â  Â  Â  Â  Â  const select = document.getElementById('form-tx-kategori');
Â  Â  Â  Â  Â  Â  select.innerHTML = '';
Â  Â  Â  Â  Â  Â  appData.categories.filter(c => c !== 'Tabungan Impian ðŸ’°').forEach(cat => {
Â  Â  Â  Â  Â  Â  Â  Â  const option = document.createElement('option');
Â  Â  Â  Â  Â  Â  Â  Â  option.value = cat;
Â  Â  Â  Â  Â  Â  Â  Â  option.textContent = cat;
Â  Â  Â  Â  Â  Â  Â  Â  select.appendChild(option);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Inisialisasi modal transaksi */
Â  Â  Â  Â  function initializeAddTxModal() {
Â  Â  Â  Â  Â  Â  switchTxType('pengeluaran'); // Default ke Pengeluaran
Â  Â  Â  Â  Â  Â  document.getElementById('form-tx-nominal').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('form-tx-alasan').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('form-tx-tanggal').value = new Date().toISOString().substring(0, 10);
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menyimpan transaksi baru */
Â  Â  Â  Â  function saveTransaction() {
Â  Â  Â  Â  Â  Â  const nominal = parseInt(document.getElementById('form-tx-nominal').value) || 0;
Â  Â  Â  Â  Â  Â  const kategori = txType === 'pengeluaran' ? document.getElementById('form-tx-kategori').value : 'Pemasukan Lain';
Â  Â  Â  Â  Â  Â  const alasan = document.getElementById('form-tx-alasan').value || (txType === 'pemasukan' ? 'Pemasukan' : 'Pengeluaran');
Â  Â  Â  Â  Â  Â  const tanggal = document.getElementById('form-tx-tanggal').value;

Â  Â  Â  Â  Â  Â  if (nominal <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Nominal harus lebih dari nol.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (!tanggal) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Tanggal harus diisi.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Hitung ID baru
Â  Â  Â  Â  Â  Â  const newId = appData.transactions.length > 0 ? Math.max(...appData.transactions.map(t => t.id)) + 1 : 1;

Â  Â  Â  Â  Â  Â  const newTx = {
Â  Â  Â  Â  Â  Â  Â  Â  id: newId,
Â  Â  Â  Â  Â  Â  Â  Â  type: txType,
Â  Â  Â  Â  Â  Â  Â  Â  amount: nominal,
Â  Â  Â  Â  Â  Â  Â  Â  category: kategori,
Â  Â  Â  Â  Â  Â  Â  Â  note: alasan,
Â  Â  Â  Â  Â  Â  Â  Â  date: tanggal,
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  appData.transactions.unshift(newTx); // Tambahkan ke awal
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Update Saldo
Â  Â  Â  Â  Â  Â  if (txType === 'pemasukan') {
Â  Â  Â  Â  Â  Â  Â  Â  appData.saldo += nominal;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  appData.saldo -= nominal;
Â  Â  Â  Â  Â  Â  Â  Â  // Update Tabungan Impian jika kategorinya adalah Tabungan Impian
Â  Â  Â  Â  Â  Â  Â  Â  if (kategori === 'Tabungan Impian ðŸ’°') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  appData.dream.currentSaved += nominal;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  hideModal('modal-add-tx');
Â  Â  Â  Â  Â  Â  renderDashboard();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Alur 5: Ubah Impian ---

Â  Â  Â  Â  /** Inisialisasi modal impian */
Â  Â  Â  Â  function initializeDreamModal() {
Â  Â  Â  Â  Â  Â  document.getElementById('form-dream-title').value = appData.dream.title;
Â  Â  Â  Â  Â  Â  document.getElementById('form-dream-target').value = appData.dream.targetAmount;
Â  Â  Â  Â  Â  Â  document.getElementById('form-dream-date').value = appData.dream.targetDate;
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menyimpan data impian */
Â  Â  Â  Â  function saveDream() {
Â  Â  Â  Â  Â  Â  const title = document.getElementById('form-dream-title').value;
Â  Â  Â  Â  Â  Â  const target = parseInt(document.getElementById('form-dream-target').value) || 0;
Â  Â  Â  Â  Â  Â  const date = document.getElementById('form-dream-date').value;

Â  Â  Â  Â  Â  Â  if (!title || target <= 0 || !date) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Semua kolom impian harus diisi dengan benar.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  appData.dream.title = title;
Â  Â  Â  Â  Â  Â  appData.dream.targetAmount = target;
Â  Â  Â  Â  Â  Â  appData.dream.targetDate = date;

Â  Â  Â  Â  Â  Â  // Logika tambahan: Jika Tabungan Impian adalah kategori baru, tambahkan
Â  Â  Â  Â  Â  Â  if (!appData.categories.includes('Tabungan Impian ðŸ’°')) {
Â  Â  Â  Â  Â  Â  Â  Â  appData.categories.push('Tabungan Impian ðŸ’°');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  hideModal('modal-edit-dream');
Â  Â  Â  Â  Â  Â  renderDashboard();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Alur 4: Pengaturan (Penyimpanan) ---

Â  Â  Â  Â  /** Memuat nilai pengaturan ke dalam form */
Â  Â  Â  Â  function loadSettingsForm(pageId) {
Â  Â  Â  Â  Â  Â  if (pageId === 'page-settings-limit') {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('setting-limit-bulanan').value = appData.budgetLimit;
Â  Â  Â  Â  Â  Â  } else if (pageId === 'page-settings-kategori') {
Â  Â  Â  Â  Â  Â  Â  Â  renderCategorySettings();
Â  Â  Â  Â  Â  Â  } else if (pageId === 'page-settings-motivasi') {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('setting-motivasi-kuning').value = appData.settings.motivasiKuning;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('setting-motivasi-merah').value = appData.settings.motivasiMerah;
Â  Â  Â  Â  Â  Â  } else if (pageId === 'page-settings-notifikasi') {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('setting-notif-aktif').checked = appData.settings.notifAktif;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('setting-notif-waktu').value = appData.settings.notifWaktu;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menyimpan Limit Bulanan */
Â  Â  Â  Â  function saveSettingsLimit() {
Â  Â  Â  Â  Â  Â  const newLimit = parseInt(document.getElementById('setting-limit-bulanan').value) || 0;
Â  Â  Â  Â  Â  Â  appData.budgetLimit = newLimit;
Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  navigateTo('page-settings');
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menambahkan Kategori Baru */
Â  Â  Â  Â  function addCategory() {
Â  Â  Â  Â  Â  Â  const input = document.getElementById('setting-kategori-baru');
Â  Â  Â  Â  Â  Â  const newCat = input.value.trim();

Â  Â  Â  Â  Â  Â  if (newCat && !appData.categories.includes(newCat)) {
Â  Â  Â  Â  Â  Â  Â  Â  appData.categories.push(newCat);
Â  Â  Â  Â  Â  Â  Â  Â  input.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  Â  Â  renderCategorySettings();
Â  Â  Â  Â  Â  Â  } else if (newCat) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Kategori sudah ada atau kosong.');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menghapus Kategori */
Â  Â  Â  Â  function removeCategory(categoryName) {
Â  Â  Â  Â  Â  Â  if (categoryName === 'Tabungan Impian ðŸ’°' || categoryName === 'Pemasukan Lain') {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Kategori sistem ini tidak bisa dihapus.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (confirm(`Yakin ingin menghapus kategori "${categoryName}"? Transaksi yang sudah ada akan tetap tersimpan.`)) {
Â  Â  Â  Â  Â  Â  Â  Â  appData.categories = appData.categories.filter(c => c !== categoryName);
Â  Â  Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  Â  Â  renderCategorySettings();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Render daftar kategori di halaman pengaturan */
Â  Â  Â  Â  function renderCategorySettings() {
Â  Â  Â  Â  Â  Â  const list = document.getElementById('settings-kategori-list');
Â  Â  Â  Â  Â  Â  list.innerHTML = '';
Â  Â  Â  Â  Â  Â  appData.categories.forEach(cat => {
Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'flex justify-between items-center p-3 bg-gray-50 rounded-lg';
Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-gray-700">${cat}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${cat === 'Tabungan Impian ðŸ’°' ? '<span class="text-xs text-gray-500">Sistem</span>' : 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `<button onclick="removeCategory('${cat}')" class="text-danger hover:text-red-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 10-2 0v6a1 1 0 102 0V8z" clip-rule="evenodd" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>`}
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  list.appendChild(item);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /** Menyimpan Kata Motivasi */
Â  Â  Â  Â  function saveSettingsMotivasi() {
Â  Â  Â  Â  Â  Â  appData.settings.motivasiKuning = document.getElementById('setting-motivasi-kuning').value;
Â  Â  Â  Â  Â  Â  appData.settings.motivasiMerah = document.getElementById('setting-motivasi-merah').value;
Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  navigateTo('page-settings');
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Menyimpan Pengaturan Notifikasi */
Â  Â  Â  Â  function saveSettingsNotifikasi() {
Â  Â  Â  Â  Â  Â  appData.settings.notifAktif = document.getElementById('setting-notif-aktif').checked;
Â  Â  Â  Â  Â  Â  appData.settings.notifWaktu = document.getElementById('setting-notif-waktu').value;
Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  navigateTo('page-settings');
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Reset Aplikasi ---
Â  Â  Â  Â  
Â  Â  Â  Â  /** Reset semua data aplikasi ke default */
Â  Â  Â  Â  function resetAppData() {
Â  Â  Â  Â  Â  Â  // Menggunakan teknik spread untuk membuat salinan baru
Â  Â  Â  Â  Â  Â  appData = JSON.parse(JSON.stringify(DEFAULT_DATA));
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Pastikan transaksi reset ke transaksi default yang memiliki tanggal hari ini
Â  Â  Â  Â  Â  Â  const today = new Date().toISOString().substring(0, 10);
Â  Â  Â  Â  Â  Â  appData.transactions.forEach(tx => {
Â  Â  Â  Â  Â  Â  Â  Â  if (tx.id <= 3) tx.date = today;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  hideModal('modal-confirm-reset');
Â  Â  Â  Â  Â  Â  navigateTo('page-dashboard');
Â  Â  Â  Â  Â  Â  alert('Semua data aplikasi berhasil direset!');
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- Rendering Halaman Utama (Dashboard) ---

Â  Â  Â  Â  /** Menghitung total pengeluaran bulan ini */
Â  Â  Â  Â  function calculateMonthlyExpense() {
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const currentMonth = today.getMonth();
Â  Â  Â  Â  Â  Â  const currentYear = today.getFullYear();

Â  Â  Â  Â  Â  Â  return appData.transactions
Â  Â  Â  Â  Â  Â  Â  Â  .filter(tx => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const txDate = new Date(tx.date);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return tx.type === 'pengeluaran' && 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  txDate.getMonth() === currentMonth && 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  txDate.getFullYear() === currentYear &&
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tx.category !== 'Tabungan Impian ðŸ’°'; // Tabungan bukan pengeluaran budget
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  .reduce((sum, tx) => sum + tx.amount, 0);
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Merender Kartu Budget */
Â  Â  Â  Â  function renderBudgetCard(monthlyExpense) {
Â  Â  Â  Â  Â  Â  const limit = appData.budgetLimit;
Â  Â  Â  Â  Â  Â  const sisa = limit - monthlyExpense;
Â  Â  Â  Â  Â  Â  const percentUsed = limit > 0 ? (monthlyExpense / limit) * 100 : 0;

Â  Â  Â  Â  Â  Â  document.getElementById('dash-budget-sisa').textContent = formatRupiah(sisa);
Â  Â  Â  Â  Â  Â  document.getElementById('dash-budget-limit').textContent = formatRupiah(limit);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const indicator = document.getElementById('dash-budget-indicator');
Â  Â  Â  Â  Â  Â  const warning = document.getElementById('dash-budget-warning');

Â  Â  Â  Â  Â  Â  // Logika Indikator Budget
Â  Â  Â  Â  Â  Â  indicator.className = ''; // Reset class
Â  Â  Â  Â  Â  Â  if (percentUsed >= 90) {
Â  Â  Â  Â  Â  Â  Â  Â  indicator.textContent = 'Bahaya!';
Â  Â  Â  Â  Â  Â  Â  Â  indicator.classList.add('bg-danger', 'px-3', 'py-1', 'rounded-full', 'text-sm', 'font-semibold', 'text-white');
Â  Â  Â  Â  Â  Â  Â  Â  warning.textContent = appData.settings.motivasiMerah;
Â  Â  Â  Â  Â  Â  Â  Â  warning.classList.add('text-danger');
Â  Â  Â  Â  Â  Â  } else if (percentUsed >= 70) {
Â  Â  Â  Â  Â  Â  Â  Â  indicator.textContent = 'Hati-hati';
Â  Â  Â  Â  Â  Â  Â  Â  indicator.classList.add('bg-warning', 'px-3', 'py-1', 'rounded-full', 'text-sm', 'font-semibold', 'text-white');
Â  Â  Â  Â  Â  Â  Â  Â  warning.textContent = appData.settings.motivasiKuning;
Â  Â  Â  Â  Â  Â  Â  Â  warning.classList.remove('text-danger');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  indicator.textContent = 'Aman';
Â  Â  Â  Â  Â  Â  Â  Â  indicator.classList.add('bg-success', 'px-3', 'py-1', 'rounded-full', 'text-sm', 'font-semibold', 'text-white');
Â  Â  Â  Â  Â  Â  Â  Â  warning.textContent = `Anda baru menggunakan ${Math.round(percentUsed)}% budget. Semangat!`;
Â  Â  Â  Â  Â  Â  Â  Â  warning.classList.remove('text-danger');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Merender Kartu Impian */
Â  Â  Â  Â  function renderDreamCard() {
Â  Â  Â  Â  Â  Â  const { title, targetAmount, targetDate, currentSaved } = appData.dream;
Â  Â  Â  Â  Â  Â  const progress = targetAmount > 0 ? Math.min(100, (currentSaved / targetAmount) * 100) : 0;

Â  Â  Â  Â  Â  Â  document.getElementById('dash-dream-title').textContent = title;
Â  Â  Â  Â  Â  Â  document.getElementById('dash-dream-target-amount').textContent = formatRupiah(targetAmount);
Â  Â  Â  Â  Â  Â  document.getElementById('dash-dream-target-date').textContent = formatDate(targetDate);
Â  Â  Â  Â  Â  Â  document.getElementById('dash-dream-progress').style.width = `${progress}%`;
Â  Â  Â  Â  Â  Â  document.getElementById('dash-dream-progress-percent').textContent = `${Math.round(progress)}%`;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /** Merender Histori Singkat di Dashboard */
Â  Â  Â  Â  function renderDashboardHistory() {
Â  Â  Â  Â  Â  Â  const listContainer = document.getElementById('dash-history-list');
Â  Â  Â  Â  Â  Â  listContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (appData.transactions.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  listContainer.innerHTML = '<p class="text-center text-gray-500 py-4">Belum ada transaksi.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const latestTx = appData.transactions.slice(0, 5); // Ambil 5 transaksi terbaru

Â  Â  Â  Â  Â  Â  latestTx.forEach(tx => {
Â  Â  Â  Â  Â  Â  Â  Â  const isExpense = tx.type === 'pengeluaran';
Â  Â  Â  Â  Â  Â  Â  Â  const color = isExpense ? 'text-danger' : 'text-success';
Â  Â  Â  Â  Â  Â  Â  Â  const sign = isExpense ? '-' : '+';
Â  Â  Â  Â  Â  Â  Â  Â  const categoryText = tx.category === 'Pemasukan Lain' ? 'Pemasukan' : tx.category;

Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'flex items-center justify-between bg-white p-3 rounded-lg shadow-sm';
Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium text-gray-800">${tx.note}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-500 mt-0.5">${categoryText} - ${formatDate(tx.date)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="${color} font-bold text-sm">${sign} ${formatRupiah(tx.amount).replace('Rp', '')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  listContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }


Â  Â  Â  Â  /** Fungsi utama untuk merender dashboard */
Â  Â  Â  Â  function renderDashboard() {
Â  Â  Â  Â  Â  Â  loadData();
Â  Â  Â  Â  Â  Â  const monthlyExpense = calculateMonthlyExpense();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById('dash-saldo').textContent = formatRupiah(appData.saldo);
Â  Â  Â  Â  Â  Â  renderDreamCard();
Â  Â  Â  Â  Â  Â  renderBudgetCard(monthlyExpense);
Â  Â  Â  Â  Â  Â  renderDashboardHistory();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Alur 2: Histori Transaksi ---

Â  Â  Â  Â  /** Filter transaksi berdasarkan periode waktu */
Â  Â  Â  Â  function filterTransactions(period) {
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  let startDate = new Date();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (period === 'today') {
Â  Â  Â  Â  Â  Â  Â  Â  startDate.setHours(0, 0, 0, 0);
Â  Â  Â  Â  Â  Â  } else if (period === 'week') {
Â  Â  Â  Â  Â  Â  Â  Â  const dayOfWeek = today.getDay(); // 0 for Sunday
Â  Â  Â  Â  Â  Â  Â  Â  // Mulai dari hari Minggu (atau hari yang sama minggu lalu)
Â  Â  Â  Â  Â  Â  Â  Â  startDate.setDate(today.getDate() - dayOfWeek); 
Â  Â  Â  Â  Â  Â  Â  Â  startDate.setHours(0, 0, 0, 0);
Â  Â  Â  Â  Â  Â  } else if (period === 'month') {
Â  Â  Â  Â  Â  Â  Â  Â  startDate.setDate(1);
Â  Â  Â  Â  Â  Â  Â  Â  startDate.setHours(0, 0, 0, 0);
Â  Â  Â  Â  Â  Â  } else if (period === 'all') {
Â  Â  Â  Â  Â  Â  Â  Â  return appData.transactions;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  return appData.transactions.filter(tx => {
Â  Â  Â  Â  Â  Â  Â  Â  const txDate = new Date(tx.date);
Â  Â  Â  Â  Â  Â  Â  Â  return txDate >= startDate;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Merender Halaman Histori */
Â  Â  Â  Â  function renderHistoryPage() {
Â  Â  Â  Â  Â  Â  loadData();
Â  Â  Â  Â  Â  Â  const period = document.getElementById('history-filter-time').value;
Â  Â  Â  Â  Â  Â  const filteredTx = filterTransactions(period).sort((a, b) => new Date(b.date) - new Date(a.date)); // Urutkan terbaru dulu
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let totalIn = 0;
Â  Â  Â  Â  Â  Â  let totalOut = 0;

Â  Â  Â  Â  Â  Â  const listContainer = document.getElementById('history-full-list');
Â  Â  Â  Â  Â  Â  listContainer.innerHTML = '';

Â  Â  Â  Â  Â  Â  if (filteredTx.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  listContainer.innerHTML = '<p class="text-center text-gray-500 py-8">Tidak ada transaksi untuk periode ini.</p>';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  filteredTx.forEach(tx => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isExpense = tx.type === 'pengeluaran';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const color = isExpense ? 'text-danger' : 'text-success';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const sign = isExpense ? '-' : '+';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const categoryText = tx.category === 'Pemasukan Lain' ? 'Pemasukan' : tx.category;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isExpense) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  totalOut += tx.amount;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  totalIn += tx.amount;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'flex items-center justify-between bg-white p-4 rounded-xl shadow-sm border border-gray-200';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1 min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold text-gray-800 truncate">${tx.note}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-500 mt-0.5">${categoryText}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-right ml-3 flex-shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="${color} font-extrabold">${sign}${formatRupiah(tx.amount).replace('Rp', '')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-400">${formatDate(tx.date)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  listContainer.appendChild(item);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  document.getElementById('hist-total-in').textContent = formatRupiah(totalIn);
Â  Â  Â  Â  Â  Â  document.getElementById('hist-total-out').textContent = formatRupiah(totalOut);
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Alur 3: Analisis Pengeluaran ---
Â  Â  Â  Â  
Â  Â  Â  Â  let analysisChart = null; // Variabel global untuk menyimpan instance Chart.js

Â  Â  Â  Â  /** Menghitung pengeluaran per kategori untuk periode tertentu */
Â  Â  Â  Â  function getCategorySpending(period) {
Â  Â  Â  Â  Â  Â  const filteredTx = filterTransactions(period)
Â  Â  Â  Â  Â  Â  Â  Â  .filter(tx => tx.type === 'pengeluaran' && tx.category !== 'Tabungan Impian ðŸ’°');

Â  Â  Â  Â  Â  Â  const spendingByCategory = filteredTx.reduce((acc, tx) => {
Â  Â  Â  Â  Â  Â  Â  Â  acc[tx.category] = (acc[tx.category] || 0) + tx.amount;
Â  Â  Â  Â  Â  Â  Â  Â  return acc;
Â  Â  Â  Â  Â  Â  }, {});

Â  Â  Â  Â  Â  Â  return spendingByCategory;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /** Merender Chart Analisis */
Â  Â  Â  Â  function renderAnalysisChart(spendingData) {
Â  Â  Â  Â  Â  Â  const ctx = document.getElementById('analysis-chart').getContext('2d');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (analysisChart) {
Â  Â  Â  Â  Â  Â  Â  Â  analysisChart.destroy();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const labels = Object.keys(spendingData);
Â  Â  Â  Â  Â  Â  const data = Object.values(spendingData);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Warna acak untuk visualisasi
Â  Â  Â  Â  Â  Â  const backgroundColors = [
Â  Â  Â  Â  Â  Â  Â  Â  '#059669', // primary
Â  Â  Â  Â  Â  Â  Â  Â  '#f59e0b', // secondary
Â  Â  Â  Â  Â  Â  Â  Â  '#ef4444', // danger
Â  Â  Â  Â  Â  Â  Â  Â  '#3b82f6', // blue
Â  Â  Â  Â  Â  Â  Â  Â  '#8b5cf6', // violet
Â  Â  Â  Â  Â  Â  Â  Â  '#10b981', // emerald
Â  Â  Â  Â  Â  Â  Â  Â  '#f97316', // orange
Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  analysisChart = new Chart(ctx, {
Â  Â  Â  Â  Â  Â  Â  Â  type: 'pie', // Menggunakan Pie Chart
Â  Â  Â  Â  Â  Â  Â  Â  data: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  labels: labels,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: data,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: backgroundColors.slice(0, labels.length),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  hoverOffset: 4
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }]
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  options: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  maintainAspectRatio: false,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  legend: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  position: 'top',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tooltip: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  callbacks: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: function(context) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let label = context.label || '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (label) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label += ': ';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label += formatRupiah(context.parsed);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return label;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Merender Halaman Analisis */
Â  Â  Â  Â  function renderAnalysisPage() {
Â  Â  Â  Â  Â  Â  loadData();
Â  Â  Â  Â  Â  Â  const period = document.getElementById('analysis-filter-time').value;
Â  Â  Â  Â  Â  Â  const spendingData = getCategorySpending(period);
Â  Â  Â  Â  Â  Â  const totalUsed = Object.values(spendingData).reduce((sum, amount) => sum + amount, 0);
Â  Â  Â  Â  Â  Â  const limit = appData.budgetLimit;
Â  Â  Â  Â  Â  Â  const sisa = limit - totalUsed;

Â  Â  Â  Â  Â  Â  // Render Chart
Â  Â  Â  Â  Â  Â  renderAnalysisChart(spendingData);

Â  Â  Â  Â  Â  Â  // Render Ringkasan Budget
Â  Â  Â  Â  Â  Â  document.getElementById('analysis-limit').textContent = formatRupiah(limit);
Â  Â  Â  Â  Â  Â  document.getElementById('analysis-terpakai').textContent = formatRupiah(totalUsed);
Â  Â  Â  Â  Â  Â  document.getElementById('analysis-sisa').textContent = formatRupiah(sisa);
Â  Â  Â  Â  Â  Â  document.getElementById('analysis-sisa').classList.remove('text-success', 'text-danger');
Â  Â  Â  Â  Â  Â  document.getElementById('analysis-sisa').classList.add(sisa >= 0 ? 'text-success' : 'text-danger');
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- Startup Aplikasi ---

Â  Â  Â  Â  window.onload = () => {
Â  Â  Â  Â  Â  Â  loadData();
Â  Â  Â  Â  Â  Â  renderDashboard();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Sembunyikan semua modal saat startup
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.modal-overlay').forEach(modal => {
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = 'none';
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Tambahkan event listener untuk memuat tanggal hari ini saat modal transaksi dibuka
Â  Â  Â  Â  Â  Â  document.getElementById('modal-add-tx').addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.id === 'modal-add-tx') hideModal('modal-add-tx'); // Tutup modal jika klik di luar konten
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.getElementById('modal-edit-dream').addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.id === 'modal-edit-dream') hideModal('modal-edit-dream'); // Tutup modal jika klik di luar konten
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  };

Â  Â  </script>

</body>
</html>
